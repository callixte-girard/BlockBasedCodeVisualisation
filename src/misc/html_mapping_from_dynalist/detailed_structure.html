<!DOCTYPE html><html><body><ul><li>several-level detailed structure and relationships between Esprima and XML<br>----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------<br>First = esprima statement type<br># = category on blockly playground https://blockly-demo.appspot.com/static/demos/code/index.html <br>@ = type of block (which types can he receive / fit into ?)<br>{} = JSX values (inserted from JS code into XML)<br>----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------<br>--&gt; slaveBlock (ExpressionStatements and BindingsPatterns) = right part, gettable, must be attached by a hostBlock<br>--&gt; hostBlock = block that hosts a valueBlock.<br>--&gt; autoBlock (Statement) = block that represents an instruction by itself<br>----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------<ul><li><b>Statement | Declaration</b><br>only hosts (autonomous)<ul><li>#Variables VariableDeclaration !<a href="https://dynalist.io/u/fGeTjdDy1rshlJlNGWoKTYhA">variables_set.png</a> @autoBlock @hostBlock <ul><li>Esprima<ul><li>statement['type'] === 'VariableDeclaration'</li><li>statement['declarations'][<i>index</i>]['id']['name'] : { @varName : #string }</li><li>statement['declarations'][<i>index</i>]['init'] : { @slaveBlock : Expression | Literal |&nbsp;Identifier }</li></ul></li><li>XML<ul><li>&lt;block type="variables_set"&gt;<ul><li>&lt;field name="VAR" variabletype=""&gt;<ul><li>{ @varName }</li></ul></li><li>&lt;/field&gt;</li><li>&lt;value name="VALUE"&gt;<ul><li>{ @slaveBlock }</li></ul></li><li>&lt;/value&gt;</li></ul></li><li>&lt;/block&gt;</li></ul></li></ul></li><li>#Variables ExpressionStatement @autoBlock @hostBlock </li><li>#Logic IfStatement !<a href="https://dynalist.io/u/Xe2rAEwkmuTrMmS_9o_oJ0Tk">controls_if.png</a> @autoBlock  @hostBlock <ul><li>Esprima<ul><li>statement['type'] === 'IfStatement'</li><li>statement['test'] : Expression</li><li>statement['consequent'] : Statements[] </li><li>statement['alternate'] : Statements[]  |  IfStatement</li></ul></li><li>XML<ul><li>&lt;block type="controls_if"&gt;<br>n = 0, 1,  2...<ul><li>&lt;mutation elseif={ nb_elseif } else={ nb_else }&gt;&lt;/mutation&gt;</li><li>&lt;value name="<ul><li>IF0              (if...)</li><li>IF1/2/3...   (...else if...)</li><li><del>(pas de condition pour le else)</del></li></ul></li><li>"&gt;<ul><li>{ @slaveBlock }</li></ul></li><li>&lt;/value&gt;</li><li>&lt;statement name="<ul><li>DO</li><li>DO1/2/3...</li><li>ELSE</li></ul></li><li>"&gt;<ul><li>{ @autoBlock }</li></ul></li><li>&lt;/statement&gt;</li></ul></li><li>&lt;/block&gt;</li></ul></li></ul></li><li>#Loops ForStatement !<a href="https://dynalist.io/u/39EkRPJegSyBRypl-dH-mXKK">controls_for.png</a> @autoBlock @hostBlock <ul><li>Esprima<ul><li>statement['type'] === 'ForStatement'</li><li>statement['init'] : VariableDeclaration | AssignmentExpression</li><li>statement['test'] : Expression</li><li>statement['update'] : UpdateExpression | AssignmentExpression</li><li>statement['body'] : Statement</li></ul></li><li>XML<ul><li>&lt;block type="controls_for"&gt;<ul><li>&lt;field name="VAR" variabletype=""&gt;<ul><li>{ @varName }</li></ul></li><li>&lt;/field&gt;</li><li>&lt;value name="FROM"&gt;<ul><li>&lt;shadow type="math_number"&gt;<ul><li>&lt;field name="NUM"&gt;<ul><li>{ @slaveBlock }</li></ul></li><li>&lt;/field&gt;</li></ul></li><li>&lt;/shadow&gt;</li></ul></li><li>&lt;/value&gt;</li><li>&lt;value name="TO"&gt;<ul><li>&lt;shadow type="math_number"&gt;<ul><li>&lt;field name="NUM"&gt;<ul><li>{ @slaveBlock }</li></ul></li><li>&lt;/field&gt;</li></ul></li><li>&lt;/shadow&gt;</li></ul></li><li>&lt;/value&gt;</li><li>&lt;value name="BY"&gt;<ul><li>&lt;shadow type="math_number"&gt;<ul><li>&lt;field name="NUM"&gt;<ul><li>{ @slaveBlock }</li></ul></li><li>&lt;/field&gt;</li></ul></li><li>&lt;/shadow&gt;</li></ul></li><li>&lt;/value&gt;</li><li>&lt;statement name="DO"&gt;<ul><li>{ @autoBlock }</li></ul></li><li>&lt;statement/&gt;</li></ul></li><li>&lt;/block&gt;</li></ul></li></ul></li><li>#Loops WhileStatement !<a href="https://dynalist.io/u/5J91R5ELZC7qdE80AQHq3cgv">controls_whileUntil.png</a> @autoBlock @hostBlock <ul><li>Esprima<ul><li>statement['type'] === 'WhileStatement'</li><li>statement['test']&nbsp;: Expression</li><li>statement['body'] : Statement</li></ul></li><li>XML<ul><li>&lt;block type="controls_whileUntil"&gt;<ul><li>&lt;field name="MODE"&gt;<ul><li>WHILE</li><li><del>UNTIL</del></li></ul></li><li>&lt;/field&gt;</li><li>&lt;value name="BOOL"&gt;<ul><li>{ @slaveBlock }<br>this is the condition</li></ul></li><li>&lt;/value&gt;</li><li>&lt;statement name="DO"&gt;<ul><li>{ @autoBlock }</li></ul></li><li>&lt;/statement&gt;</li></ul></li><li>&lt;/block&gt;</li></ul></li></ul></li></ul></li><li><b>Expression</b><br>both slaves and hosts (polyvalent)<ul><li>#Variables AssignmentExpression !<a href="https://dynalist.io/u/fGeTjdDy1rshlJlNGWoKTYhA">variables_set.png</a> @slaveBlock @hostBlock <ul><li>Esprima<ul><li>expression['type'] === 'AssignmentExpression'</li><li>expression['operator'] : '=' |&nbsp;'+=' | '-=' | '*='  @TO-DO</li><li>expression['left'] : Identifier</li><li>expression['right'] : Expression</li></ul></li><li>XML<ul><li>&lt;block type="variables_set"&gt;<ul><li>&lt;field name="VAR" variabletype=""&gt;<ul><li>{ @varName }</li></ul></li><li>&lt;/field&gt;</li><li>&lt;value name="VALUE"&gt;<ul><li>{ @slaveBlock }</li></ul></li><li>&lt;/value&gt;</li></ul></li><li>&lt;/block&gt;</li></ul></li></ul></li><li>#Variables UpdateExpression !<a href="https://dynalist.io/u/YLvId51D-hRxO2yVyzMkhFuh">math_change.png</a> @slaveBlock @hostBlock <ul><li>Esprima<ul><li>expression['type'] === 'UpdateExpression'</li><li>expression['operator'] : '++' | '--' </li><li>expression['argument'] : Identifier</li></ul></li><li>XML<ul><li>&lt;block type="math_change"&gt;<ul><li>&lt;field name="VAR" variabletype=""&gt;<ul><li>{ @varName }</li></ul></li><li>&lt;/field&gt;</li><li>&lt;value name="DELTA"&gt;<ul><li>&lt;shadow type="math_number"&gt;<ul><li>&lt;field name="NUM"&gt;<ul><li>{ @varValue }</li></ul></li><li>&lt;/field&gt;</li></ul></li><li>&lt;/shadow&gt;</li></ul></li><li>&lt;/value&gt;</li></ul></li><li>&lt;/block&gt;</li></ul></li></ul></li><li>#Logic UnaryExpression !<a href="https://dynalist.io/u/harctzBYQVTfIdQbi80uAfgU">logic_negate.png</a> @slaveBlock @hostBlock <ul><li>Esprima<ul><li>expression['type']&nbsp;=== 'UnaryExpression'</li><li>expression['argument'] : Expression</li><li>expression['operator'] : '!'<br>'-' aussi, à rajouter après</li></ul></li><li>XML<ul><li>&lt;block type="logic_negate"&gt;<ul><li>&lt;value name="BOOL"&gt;<ul><li>{ @slaveBlock }</li></ul></li><li>&lt;/value&gt;</li></ul></li><li>&lt;/block&gt;</li></ul></li></ul></li><li>#Logic LogicalExpression !<a href="https://dynalist.io/u/3vtevqQyyYZ68IZBsA-T7Yf9">logic_operations.png</a> @slaveBlock @hostBlock <ul><li>Esprima<ul><li>expression['type']&nbsp;=== 'LogicalExpression'</li><li>expression['left']&nbsp;: Expression | Identifier | Literal #boolean </li><li>expression['right'] : Expression | Identifier | Literal #boolean </li><li>expression['operator'] : '&amp;&amp;' | '||'</li></ul></li><li>XML<ul><li>&lt;block type="logic_operation"&gt;<ul><li>&lt;field name="OP"&gt;<ul><li>AND</li><li>OR</li></ul></li><li>&lt;/field&gt;</li><li>&lt;value name="A"&gt;<ul><li>{ @slaveBlock }</li></ul></li><li>&lt;/value&gt;</li><li>&lt;value name="B"&gt;<ul><li>{ @slaveBlock }</li></ul></li><li>&lt;/value&gt;</li></ul></li><li>&lt;/block&gt;</li></ul></li></ul></li><li>#Math / #Logic BinaryExpression <ul><li>Esprima (both)<ul><li>expression['type']&nbsp;=== 'BinaryExpression'</li><li>expression['left']&nbsp;: Expression | Identifier | Literal #number </li><li>expression['right'] : Expression | Identifier | Literal #number </li></ul></li><li>Two possibilities : Math or Logic.<ul><li>#Math BinaryExpression !<a href="https://dynalist.io/u/jesBBeDn6Xo0hAmUz1Nfzhgv">math_arithmetic.png</a> @slaveBlock  @hostBlock <ul><li>Esprima (specific to this one)<ul><li>expression['operator'] : '+' | '-' | '*' | '/' | '**'</li></ul></li><li>XML<ul><li>&lt;block type="math_arithmetic"&gt;<ul><li>&lt;field name="OP"&gt;<ul><li>ADD</li><li>MINUS</li><li>MULTIPLY</li><li>DIVIDE</li><li>POWER</li></ul></li><li>&lt;/field&gt;</li><li>&lt;value name="A"&gt;<ul><li>{ @slaveBlock }</li></ul></li><li>&lt;/value&gt;</li><li>&lt;value name="B"&gt;<ul><li>{ @slaveBlock }</li></ul></li><li>&lt;/value&gt;</li></ul></li><li>&lt;/block&gt;</li></ul></li></ul></li><li>#Logic BinaryExpression !<a href="https://dynalist.io/u/5ApkyPE_fpsxCx7daUfPKTzB">logic_compare.png</a> @slaveBlock  @hostBlock <ul><li>Esprima (specific to this one)<ul><li>expression['operator'] : '==' | '!=' | '&lt;' | '&lt;=' | '&gt;' | '&gt;='</li></ul></li><li>XML<ul><li>&lt;block type="logic_compare"&gt;<ul><li>&lt;field name="OP"&gt;<ul><li>EQ</li><li>NEQ</li><li>LT</li><li>LTE</li><li>GT</li><li>GTE</li></ul></li><li>&lt;/field&gt;</li><li>&lt;value name="A"&gt;<ul><li>{ @slaveBlock }</li></ul></li><li>&lt;/value&gt;</li><li>&lt;value name="B"&gt;<ul><li>{ @slaveBlock }</li></ul></li><li>&lt;/value&gt;</li></ul></li><li>&lt;/block&gt;</li></ul></li></ul></li></ul></li></ul></li><li>#Text BinaryExpression !<a href="https://dynalist.io/u/B3UOnyr1XojvSUL4Ax4DIYqr">text_join.png</a> @slaveBlock @hostBlock <ul><li>&lt;block type="text_join"&gt;<ul><li>&lt;mutation items="2"&gt;<ul><li>{ @varNames |&nbsp;@varValues }</li></ul></li><li>&lt;/mutation&gt;</li></ul></li><li>&lt;/block&gt;</li></ul></li></ul></li><li><b>Identifier |&nbsp;Literal</b><br>only slaves<ul><li>#Variables Identifier !<a href="https://dynalist.io/u/t0MCEhh-GPWn5GgmVxbpW_QC">variables_get.png</a> @slaveBlock <ul><li>Esprima<ul><li>expression['type'] === Identifier</li><li>expression['name'] : { @varName }</li></ul></li><li>XML<ul><li>&lt;block type="variables_get"&gt;<ul><li>&lt;field name="VAR" variabletype=""&gt;<ul><li>{ @varName }</li></ul></li><li>&lt;/field&gt;</li></ul></li><li>&lt;/block&gt;</li></ul></li></ul></li><li>#Math Literal !<a href="https://dynalist.io/u/y1qb5y4chuXyfyedOPcjhgT7">math_number.png</a> @slaveBlock<ul><li>Esprima<ul><li>expression['type'] === Literal</li><li>expression['value'] : { @varValue }</li><li>typeof expression['value'] : #number</li></ul></li><li>XML<ul><li>&lt;block type="math_number"&gt;<ul><li>&lt;field name="NUM"&gt;<ul><li>{ @varValue }</li></ul></li><li>&lt;/field&gt;</li></ul></li><li>&lt;/block&gt;</li></ul></li></ul></li><li>#Text Literal !<a href="https://dynalist.io/u/bZwwL96bk2lFiou98rDnnFbQ">text.png</a> @slaveBlock<ul><li>Esprima<ul><li>expression['type'] === Literal</li><li>expression['value'] : { @varValue }</li><li>typeof expression['value'] : #string</li></ul></li><li>XML<ul><li>&lt;block type="text"&gt;<ul><li>&lt;field name="TEXT"&gt;<ul><li>{ @varValue }</li></ul></li><li>&lt;/field&gt;</li></ul></li><li>&lt;/block&gt;</li></ul></li></ul></li><li>#Logic Literal !<a href="https://dynalist.io/u/qoQJRrSMOsuPZYzHFbnPAE_9">logic_boolean.png</a> @slaveBlock<ul><li>Esprima<ul><li>expression['type'] === Literal</li><li>expression['value'] : { @varValue }</li><li>typeof expression['value'] : #boolean</li></ul></li><li>XML<ul><li>&lt;block type="logic_boolean"&gt;<ul><li>&lt;field name="BOOL"&gt;<ul><li>{ @varValue }</li></ul></li><li>&lt;/field&gt;</li></ul></li><li>&lt;/block&gt;</li></ul></li></ul></li><li>#Logic Literal !<a href="https://dynalist.io/u/Zst-d8894VeNVEMlx_vYD9sG">logic_null.png</a> @slaveBlock <ul><li>Esprima<ul><li>expression['type'] === Literal</li><li>expression['value'] : { null }</li></ul></li><li>XML<ul><li>&lt;block type="logic_null"&gt;&lt;/block&gt;</li></ul></li></ul></li></ul></li></ul></li></ul></body></html>