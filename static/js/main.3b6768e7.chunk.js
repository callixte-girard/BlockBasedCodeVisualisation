(this.webpackJsonpjs2blockly=this.webpackJsonpjs2blockly||[]).push([[0],{101:function(e,t,n){},108:function(e,t,n){},182:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(95),l=n.n(o),s=(n(101),n(6)),i=n(7),c=n(9),u=n(8),m=n(10),p=n(21),h=n.n(p),f=(n(108),n(40)),E=n(41),v=n.n(E),d=n(29),y=n.n(d),b="--------------------------------------------------------------------------",g="***************************************************************************",x={height:500,width:500,font:"comic-sans-ms",display:"inline-block"},k=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).exampleCode="put your js code here...",n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("textarea",{style:x,placeholder:this.exampleCode,onChange:this.props.updateCode})}}]),t}(r.a.Component),O=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"updateBlocksFromXml",value:function(e){h.a.getMainWorkspace().clear();try{h.a.Xml.appendDomToWorkspace(h.a.Xml.textToDom(e),h.a.getMainWorkspace())}catch(t){}}},{key:"componentWillUpdate",value:function(e,t,n){this.updateBlocksFromXml(e.xmlContent)}},{key:"render",value:function(){return r.a.createElement("div",{id:"blocklyDiv",style:x})}}]),t}(r.a.Component),S=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,null,[{key:"forVariableDeclaration",value:function(e,t){var n,a;return a=r.a.createElement("field",{name:"VAR"},e),n=void 0!==t?[a,r.a.createElement("value",{name:"VALUE"},t)]:[a],r.a.createElement("block",{type:"variables_set"},n)}},{key:"forVariableUpdate",value:function(e,t){return r.a.createElement("block",{type:"math_change"},r.a.createElement("field",{name:"VAR"},e),r.a.createElement("value",{name:"DELTA"},t))}},{key:"forIfStatement",value:function(e,t){var n=[],a=e.length-1,o=t.length-e.length;n.push(r.a.createElement("mutation",{elseif:a,else:o}));for(var l=0;l<e.length;l++){var s=e[l],i=t[l];n=n.concat([r.a.createElement("value",{name:"IF"+l},s),r.a.createElement("statement",{name:"DO"+l},i)])}try{n.push(r.a.createElement("statement",{name:"ELSE"},t[e.length]))}catch(c){}return r.a.createElement("block",{type:"controls_if"},n)}},{key:"forWhileStatement",value:function(e,t){return r.a.createElement("block",{type:"controls_whileUntil"},r.a.createElement("field",{name:"MODE"},"WHILE"),r.a.createElement("value",{name:"BOOL"},e),r.a.createElement("statement",{name:"DO"},t))}},{key:"forForStatement",value:function(e,t,n,a,o){return r.a.createElement("block",{type:"controls_for"},r.a.createElement("field",{name:"VAR"},e),r.a.createElement("value",{name:"FROM"},t),r.a.createElement("value",{name:"TO"},n),r.a.createElement("value",{name:"BY"},a),r.a.createElement("statement",{name:"DO"},o))}},{key:"for1ArgExpression",value:function(e,t){var n;return n=C[t],console.log("blocklyType:",n),r.a.createElement("block",{type:n},r.a.createElement("value",{name:"BOOL"},e))}},{key:"for2ArgsExpression",value:function(e,t,n){var a,o;return o=j[n],a=A[n],console.log("blocklyOp:",o),console.log("blocklyType:",a),"="===n?r.a.createElement("block",{type:a}):r.a.createElement("block",{type:a},r.a.createElement("value",{name:"A"},e),r.a.createElement("value",{name:"B"},t),r.a.createElement("field",{name:"OP"},o))}},{key:"forEndExpression",value:function(e,t){var n,a;if("Identifier"===e)n="variables_get",a="VAR";else if("Literal"===e)if(null===t)n="logic_null";else switch(typeof t){case"number":n="math_number",a="NUM";break;case"string":n="text",a="TEXT";break;case"boolean":n="logic_boolean",a="BOOL"}var o="";return null!==a&&(o=r.a.createElement("field",{name:a},t.toString())),r.a.createElement("block",{type:n},o)}}]),t}(r.a.Component),j={"===":"EQ","==":"EQ","!==":"NEQ","!=":"NEQ","<":"LT","<=":"LTE",">":"GT",">=":"GTE","+":"ADD","-":"MINUS","*":"MULTIPLY","/":"DIVIDE","**":"POWER","&&":"AND","||":"OR"},C={"!":"logic_negate"},A={"===":"logic_compare","==":"logic_compare","!==":"logic_compare","!=":"logic_compare","<":"logic_compare","<=":"logic_compare",">":"logic_compare",">=":"logic_compare","+":"math_arithmetic","-":"math_arithmetic","*":"math_arithmetic","/":"math_arithmetic","**":"math_arithmetic","&&":"logic_operation","||":"logic_operation"};var I=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,null,[{key:"parseListStatements",value:function(e){for(var t=[],n=0;n<e.length;n++){var a=e[n],r=a.type;if(r.includes("Statement")){console.log("statementType:",r);var o=void 0,l=void 0;if("ExpressionStatement"===r){var s=a.expression,i=s.type,c=s.operator;if("AssignmentExpression"===i){var u=s.left,m=s.right,p=u.name;if("="===c)l=this.parseExpression(m),o=S.forVariableDeclaration(p,l);else if("+="===c||"-="===c){var h=m.value;o=this.parseUpdateStatement(p,h,c)}}else if("UpdateExpression"===i){var f=s.argument.name,E=1;c.includes("-")&&(E=-E),o=this.parseUpdateStatement(f,E,c)}}else"IfStatement"===r?o=this.parseIfStatement(a):"WhileStatement"===r?o=this.parseWhileStatement(a):"ForStatement"===r&&(o=this.parseForStatement(a));t.push(o)}else if(r.includes("Declaration")&&"VariableDeclaration"===r)for(var v=a.declarations,d=0;d<v.length;d++){var y,g=v[d],x=void 0,k=void 0,O=g.id,j=g.init;console.log("variableName"+d.toString()+":",O),console.log("variableValue"+d.toString()+":",j),y=O.name;try{k=this.parseExpression(j),x=S.forVariableDeclaration(y,k)}catch(C){x=S.forVariableDeclaration(y)}t.push(x)}console.log(b)}return t=_.nextifyXmlStatementListIntoSingleBlock(t)}},{key:"parseUpdateStatement",value:function(e,t,n){"-="===n&&(t=-t);var a=S.forEndExpression("Literal",t);return S.forVariableUpdate(e,a)}},{key:"parseWhileStatement",value:function(e){var t=e.test,n=e.body;console.log("statementCondition:",t);var a=this.parseExpression(t),r=this.parseAutonomousStatementInstructions(n);return S.forWhileStatement(a,r)}},{key:"parseIfStatement",value:function(e){var t=[],n=[],a=e.test,r=e.consequent;t.push(this.parseExpression(a)),n.push(this.parseAutonomousStatementInstructions(r));try{for(var o=e.alternate;"IfStatement"===o.type;)try{var l=o.test,s=o.consequent;t.push(this.parseExpression(l)),n.push(this.parseAutonomousStatementInstructions(s)),o=o.alternate}catch(i){}n.push(this.parseAutonomousStatementInstructions(o))}catch(c){}return S.forIfStatement(t,n)}},{key:"parseForStatement",value:function(e){var t,n,a,r,o=e.init,l=e.test,s=e.update,i=e.body;if("VariableDeclaration"===o.type){var c=o.declarations[0];t=c.id.name,n=c.init.value}else"AssignmentExpression"===o.type&&(t=o.left.name,n=o.right.value);a=l.right.value;var u=l.operator;"AssignmentExpression"===s.type?r=s.right.value:"UpdateExpression"===s.type&&(r=1),s.operator.includes("-")&&(r=-r),console.log(t,n,a,r);var m,p,h,f=[];return f.push(this.parseAutonomousStatementInstructions(i)),(a>=n&&u.includes("<")||a<=n&&u.includes(">"))&&(m=S.forEndExpression("Literal",n),p=S.forEndExpression("Literal",a),h=S.forEndExpression("Literal",r)),S.forForStatement(t,m,p,h,f)}},{key:"parseAutonomousStatementInstructions",value:function(e){var t=e.body;return console.log("statementInstructions:",t),this.parseListStatements(t)}},{key:"parseExpression",value:function(e){return e.type.includes("Expression")?this.parseHostExpression(e):this.parseEndExpression(e)}},{key:"parseHostExpression",value:function(e){var t,n=e.type,a=e.operator;if(console.log("expressionType:",n),console.log("expressionOperator:",a),"UnaryExpression"===n){var r=e.argument,o=this.parseExpression(r);t=S.for1ArgExpression(o,a)}else if("LogicalExpression"===n||"BinaryExpression"===n){var l=e.left,s=e.right,i=this.parseExpression(l),c=this.parseExpression(s);t=S.for2ArgsExpression(i,c,a)}else"AssignmentExpression"!==n&&"UpdateExpression"!==n||console.log("!!! UNEXPECTED SITUATION !!!");return t}},{key:"parseEndExpression",value:function(e){var t,n,a=e.type;return"Literal"===a?n="value":"Identifier"===a&&(n="name"),t=e[n],console.log("endExpression:",a,t),S.forEndExpression(a,t)}}]),t}(r.a.Component),_=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,null,[{key:"nextifyXmlStatementListIntoSingleBlock",value:function(e){for(var t=e.length-1;t>0;t--){var n=e[t],a=e[t-1],o=a.props.type,l=a.props.children;a=r.a.createElement("block",{type:o},l,r.a.createElement("next",null,n),"}"),e[t-1]=a,console.log(b)}return e[0]}},{key:"generateBlocksFromParsedContent",value:function(e){var t=r.a.createElement("xml",{xmlns:"http://www.w3.org/1999/xhtml"},I.parseListStatements(e));return console.log(b),console.log("xml_main (stringified) :",y()(t)),t}}]),t}(r.a.Component),D=n(181),L=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={parsedContent:null,xmlContent:""},n.updateCode=n.updateCode.bind(Object(f.a)(n)),n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"updateCode",value:function(e){var t=e.target.value;try{var n=this.syntaxicAnalysis(t);console.log(g),console.log("programBody:",n),console.log(g);var a=_.generateBlocksFromParsedContent(n),r=v.a.renderToStaticMarkup(a);this.setState({parsedContent:n,xmlContent:r})}catch(o){this.setState({parsedContent:null,xmlContent:""})}}},{key:"syntaxicAnalysis",value:function(e){try{return D.parse(e).body}catch(t){}}},{key:"lexicalAnalysis",value:function(e){try{return D.tokenize(e)}catch(t){}}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(k,{exampleCode:this.exampleCode,updateCode:this.updateCode}),r.a.createElement(O,{xmlContent:this.state.xmlContent}))}}]),t}(r.a.Component),T=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){h.a.inject("blocklyDiv",{toolbox:document.getElementById("toolbox")})}},{key:"render",value:function(){return r.a.createElement("div",{className:"main"},r.a.createElement("div",{className:"header"},r.a.createElement("h1",null,"HEY GUYS :)"),r.a.createElement("h4",null,"Enjoy visualising horribly-indented code with this fantastic app ;)")),r.a.createElement("br",null),r.a.createElement(L,{className:"main-container"}))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},96:function(e,t,n){e.exports=n(182)}},[[96,1,2]]]);
//# sourceMappingURL=main.3b6768e7.chunk.js.map