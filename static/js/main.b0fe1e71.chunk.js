(this.webpackJsonpjs2blockly=this.webpackJsonpjs2blockly||[]).push([[0],{101:function(e,t,n){},108:function(e,t,n){},182:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(95),l=n.n(o),i=(n(101),n(6)),s=n(7),c=n(9),u=n(8),m=n(10),p=n(21),h=n.n(p),f=(n(108),n(39)),E=n(40),v=n.n(E),d="--------------------------------------------------------------------------",y="***************************************************************************",b={height:500,width:700,font:"comic-sans-ms",display:"inline-block"},g="while (p>5 || p<3) { r = true || 3 > 5 + (2 + x) }",k=function(e){function t(e){var n;return Object(i.a)(this,t),n=Object(c.a)(this,Object(u.a)(t).call(this,e)),e.updateCode(),n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("textarea",{style:b,placeholder:"Input your JavaScript code here",onChange:this.props.updateCode},g)}}]),t}(r.a.Component),x=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"updateBlocksFromXml",value:function(e){h.a.getMainWorkspace().clear();try{h.a.Xml.appendDomToWorkspace(h.a.Xml.textToDom(e),h.a.getMainWorkspace())}catch(t){}}},{key:"componentWillUpdate",value:function(e,t,n){this.updateBlocksFromXml(e.xmlContent)}},{key:"render",value:function(){return r.a.createElement("div",{id:"blocklyDiv",style:b})}}]),t}(r.a.Component),O=n(41),S=n.n(O),j=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,null,[{key:"forVariableDeclaration",value:function(e,t){var n,a;return a=r.a.createElement("field",{name:"VAR"},e),n=void 0!==t?[a,r.a.createElement("value",{name:"VALUE"},t)]:[a],r.a.createElement("block",{type:"variables_set"},n)}},{key:"forVariableUpdate",value:function(e,t){return r.a.createElement("block",{type:"math_change"},r.a.createElement("field",{name:"VAR"},e),r.a.createElement("value",{name:"DELTA"},t))}},{key:"forIfStatement",value:function(e,t){var n=[],a=e.length-1,o=t.length-e.length;n.push(r.a.createElement("mutation",{elseif:a,else:o}));for(var l=0;l<e.length;l++){var i=e[l],s=t[l];n=n.concat([r.a.createElement("value",{name:"IF"+l},i),r.a.createElement("statement",{name:"DO"+l},s)])}try{n.push(r.a.createElement("statement",{name:"ELSE"},t[e.length]))}catch(c){}return r.a.createElement("block",{type:"controls_if"},n)}},{key:"forWhileStatement",value:function(e,t){return r.a.createElement("block",{type:"controls_whileUntil"},r.a.createElement("field",{name:"MODE"},"WHILE"),r.a.createElement("value",{name:"BOOL"},e),r.a.createElement("statement",{name:"DO"},t))}},{key:"forForStatement",value:function(e,t,n,a,o){return r.a.createElement("block",{type:"controls_for"},r.a.createElement("field",{name:"VAR"},e),r.a.createElement("value",{name:"FROM"},t),r.a.createElement("value",{name:"TO"},n),r.a.createElement("value",{name:"BY"},a),r.a.createElement("statement",{name:"DO"},o))}},{key:"for1ArgExpression",value:function(e,t){var n;return n=I[t],console.log("blocklyType:",n),r.a.createElement("block",{type:n},r.a.createElement("value",{name:"BOOL"},e))}},{key:"for2ArgsExpression",value:function(e,t,n){var a,o;return o=C[n],a=A[n],console.log("blocklyOp:",o),console.log("blocklyType:",a),"="===n?r.a.createElement("block",{type:a}):r.a.createElement("block",{type:a},r.a.createElement("value",{name:"A"},e),r.a.createElement("value",{name:"B"},t),r.a.createElement("field",{name:"OP"},o))}},{key:"forEndExpression",value:function(e,t){var n,a;if("Identifier"===e)n="variables_get",a="VAR";else if("Literal"===e)if(null===t)n="logic_null";else switch(typeof t){case"number":n="math_number",a="NUM";break;case"string":n="text",a="TEXT";break;case"boolean":n="logic_boolean",a="BOOL"}var o="";return null!==a&&(o=r.a.createElement("field",{name:a},t.toString())),r.a.createElement("block",{type:n},o)}}]),t}(r.a.Component),C={"===":"EQ","==":"EQ","!==":"NEQ","!=":"NEQ","<":"LT","<=":"LTE",">":"GT",">=":"GTE","+":"ADD","-":"MINUS","*":"MULTIPLY","/":"DIVIDE","**":"POWER","&&":"AND","||":"OR"},I={"!":"logic_negate"},A={"===":"logic_compare","==":"logic_compare","!==":"logic_compare","!=":"logic_compare","<":"logic_compare","<=":"logic_compare",">":"logic_compare",">=":"logic_compare","+":"math_arithmetic","-":"math_arithmetic","*":"math_arithmetic","/":"math_arithmetic","**":"math_arithmetic","&&":"logic_operation","||":"logic_operation"};var _=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,null,[{key:"parseListStatements",value:function(e){for(var t=[],n=0;n<e.length;n++){var a=e[n],r=a.type;if(r.includes("Statement")){console.log("statementType:",r);var o=void 0,l=void 0;if("ExpressionStatement"===r){var i=a.expression,s=i.type,c=i.operator;if("AssignmentExpression"===s){var u=i.left,m=i.right,p=u.name;if("="===c)l=this.parseExpression(m),o=j.forVariableDeclaration(p,l);else if("+="===c||"-="===c){var h=m.value;o=this.parseUpdateStatement(p,h,c)}}else if("UpdateExpression"===s){var f=i.argument.name,E=1;c.includes("-")&&(E=-E),o=this.parseUpdateStatement(f,E,c)}}else"IfStatement"===r?o=this.parseIfStatement(a):"WhileStatement"===r?o=this.parseWhileStatement(a):"ForStatement"===r&&(o=this.parseForStatement(a));t.push(o)}else if(r.includes("Declaration")&&"VariableDeclaration"===r)for(var v=a.declarations,y=0;y<v.length;y++){var b,g=v[y],k=void 0,x=void 0,O=g.id,S=g.init;console.log("variableName"+y.toString()+":",O),console.log("variableValue"+y.toString()+":",S),b=O.name;try{x=this.parseExpression(S),k=j.forVariableDeclaration(b,x)}catch(C){k=j.forVariableDeclaration(b)}t.push(k)}console.log(d)}return t=D.nextifyXmlStatementListIntoSingleBlock(t)}},{key:"parseUpdateStatement",value:function(e,t,n){"-="===n&&(t=-t);var a=j.forEndExpression("Literal",t);return j.forVariableUpdate(e,a)}},{key:"parseWhileStatement",value:function(e){var t=e.test,n=e.body;console.log("statementCondition:",t);var a=this.parseExpression(t),r=this.parseAutonomousStatementInstructions(n);return j.forWhileStatement(a,r)}},{key:"parseIfStatement",value:function(e){var t=[],n=[],a=e.test,r=e.consequent;t.push(this.parseExpression(a)),n.push(this.parseAutonomousStatementInstructions(r));try{for(var o=e.alternate;"IfStatement"===o.type;)try{var l=o.test,i=o.consequent;t.push(this.parseExpression(l)),n.push(this.parseAutonomousStatementInstructions(i)),o=o.alternate}catch(s){}n.push(this.parseAutonomousStatementInstructions(o))}catch(c){}return j.forIfStatement(t,n)}},{key:"parseForStatement",value:function(e){var t,n,a,r,o=e.init,l=e.test,i=e.update,s=e.body;if("VariableDeclaration"===o.type){var c=o.declarations[0];t=c.id.name,n=c.init.value}else"AssignmentExpression"===o.type&&(t=o.left.name,n=o.right.value);a=l.right.value;var u=l.operator;"AssignmentExpression"===i.type?r=i.right.value:"UpdateExpression"===i.type&&(r=1),i.operator.includes("-")&&(r=-r),console.log(t,n,a,r);var m,p,h,f=[];return f.push(this.parseAutonomousStatementInstructions(s)),(a>=n&&u.includes("<")||a<=n&&u.includes(">"))&&(m=j.forEndExpression("Literal",n),p=j.forEndExpression("Literal",a),h=j.forEndExpression("Literal",r)),j.forForStatement(t,m,p,h,f)}},{key:"parseAutonomousStatementInstructions",value:function(e){var t=e.body;return console.log("statementInstructions:",t),this.parseListStatements(t)}},{key:"parseExpression",value:function(e){return e.type.includes("Expression")?this.parseHostExpression(e):this.parseEndExpression(e)}},{key:"parseHostExpression",value:function(e){var t,n=e.type,a=e.operator;if(console.log("expressionType:",n),console.log("expressionOperator:",a),"UnaryExpression"===n){var r=e.argument,o=this.parseExpression(r);t=j.for1ArgExpression(o,a)}else if("LogicalExpression"===n||"BinaryExpression"===n){var l=e.left,i=e.right,s=this.parseExpression(l),c=this.parseExpression(i);t=j.for2ArgsExpression(s,c,a)}else"AssignmentExpression"!==n&&"UpdateExpression"!==n||console.log("!!! UNEXPECTED SITUATION !!!");return t}},{key:"parseEndExpression",value:function(e){var t,n,a=e.type;return"Literal"===a?n="value":"Identifier"===a&&(n="name"),t=e[n],console.log("endExpression:",a,t),j.forEndExpression(a,t)}}]),t}(r.a.Component),D=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,null,[{key:"nextifyXmlStatementListIntoSingleBlock",value:function(e){for(var t=e.length-1;t>0;t--){var n=e[t],a=e[t-1],o=a.props.type,l=a.props.children;a=r.a.createElement("block",{type:o},l,r.a.createElement("next",null,n),"}"),e[t-1]=a,console.log(d)}return e[0]}},{key:"generateBlocksFromParsedContent",value:function(e){var t=r.a.createElement("xml",{xmlns:"http://www.w3.org/1999/xhtml"},_.parseListStatements(e));return console.log(d),console.log("xml_main (stringified) :",S()(t)),t}}]),t}(r.a.Component),L=n(181),T=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={parsedContent:null,xmlContent:""},n.updateCode=n.updateCode.bind(Object(f.a)(n)),n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"updateCode",value:function(e){var t;t=void 0!==e?e.target.value:g;try{var n=this.syntaxicAnalysis(t);console.log(y),console.log("programBody:",n),console.log(y);var a=D.generateBlocksFromParsedContent(n),r=v.a.renderToStaticMarkup(a);this.setState({parsedContent:n,xmlContent:r})}catch(o){this.setState({parsedContent:null,xmlContent:""})}}},{key:"syntaxicAnalysis",value:function(e){try{return L.parse(e).body}catch(t){}}},{key:"lexicalAnalysis",value:function(e){try{return L.tokenize(e)}catch(t){}}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(k,{updateCode:this.updateCode}),r.a.createElement(x,{xmlContent:this.state.xmlContent}))}}]),t}(r.a.Component),U=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){h.a.inject("blocklyDiv",{toolbox:document.getElementById("toolbox")})}},{key:"render",value:function(){return r.a.createElement("div",{className:"main"},r.a.createElement("div",{className:"header"},r.a.createElement("h1",null,"HEY GUYS :)"),r.a.createElement("h4",null,"Enjoy visualising horribly-indented code with this fantastic app ;)")),r.a.createElement("br",null),r.a.createElement(T,{className:"main-container"}))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(U,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},96:function(e,t,n){e.exports=n(182)}},[[96,1,2]]]);
//# sourceMappingURL=main.b0fe1e71.chunk.js.map